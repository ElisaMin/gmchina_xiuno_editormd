/*! Editor.md v1.5.1-re | addons.min.js | Open source online markdown editor. | MIT License | By: Pandao | https://github.com/pandao/editor.md | 2023-01-04 */
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(o){o.defineOption("showTrailingSpace",!1,function(e,t,n){(n=n==o.Init?!1:n)&&!t?e.removeOverlay("trailingspace"):!n&&t&&e.addOverlay({token:function(e){for(var t=e.string.length,n=t;n&&/\s/.test(e.string.charAt(n-1));--n);return n>e.pos?(e.pos=n,null):(e.pos=t,"trailingspace")},name:"trailingspace"})})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(u){function d(e,t,n){e=e.getWrapperElement().appendChild(document.createElement("div"));return e.className=n?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof t?e.innerHTML=t:e.appendChild(t),e}function h(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}u.defineExtension("openDialog",function(e,t,n){n=n||{},h(this,null);var o=d(this,e,n.bottom),r=!1,i=this;function l(e){"string"==typeof e?a.value=e:r||(r=!0,o.parentNode.removeChild(o),i.focus(),n.onClose&&n.onClose(o))}var a=o.getElementsByTagName("input")[0];return a?(n.value&&(a.value=n.value,a.select()),n.onInput&&u.on(a,"input",function(e){n.onInput(e,a.value,l)}),n.onKeyUp&&u.on(a,"keyup",function(e){n.onKeyUp(e,a.value,l)}),u.on(a,"keydown",function(e){n&&n.onKeyDown&&n.onKeyDown(e,a.value,l)||((27==e.keyCode||!1!==n.closeOnEnter&&13==e.keyCode)&&(a.blur(),u.e_stop(e),l()),13==e.keyCode&&t(a.value,e))}),!1!==n.closeOnBlur&&u.on(a,"blur",l),a.focus()):(e=o.getElementsByTagName("button")[0])&&(u.on(e,"click",function(){l(),i.focus()}),!1!==n.closeOnBlur&&u.on(e,"blur",l),e.focus()),l}),u.defineExtension("openConfirm",function(e,t,n){h(this,null);var o=d(this,e,n&&n.bottom),r=o.getElementsByTagName("button"),i=!1,l=this,a=1;function s(){i||(i=!0,o.parentNode.removeChild(o),l.focus())}r[0].focus();for(var c=0;c<r.length;++c){var f=r[c];!function(t){u.on(f,"click",function(e){u.e_preventDefault(e),s(),t&&t(l)})}(t[c]),u.on(f,"blur",function(){--a,setTimeout(function(){a<=0&&s()},200)}),u.on(f,"focus",function(){++a})}}),u.defineExtension("openNotification",function(e,t){h(this,i);var n,o=d(this,e,t&&t.bottom),r=!1,e=t&&void 0!==t.duration?t.duration:5e3;function i(){r||(r=!0,clearTimeout(n),o.parentNode.removeChild(o))}return u.on(o,"click",function(e){u.e_preventDefault(e),i()}),e&&(n=setTimeout(i,e)),i})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(r){"use strict";var d=r.Pos;function o(s,c,e,t){var i,a,f,u;this.atOccurrence=!1,this.doc=s,null==t&&"string"==typeof c&&(t=!1),e=e?s.clipPos(e):d(0,0),this.pos={from:e,to:e},"string"!=typeof c?(c.global||(c=new RegExp(c.source,c.ignoreCase?"ig":"g")),this.matches=function(e,t){if(e){c.lastIndex=0;for(var n=s.getLine(t.line).slice(0,t.ch),o=0;;){c.lastIndex=o;var r=c.exec(n);if(!r)break;if(l=(i=r).index,(o=i.index+(i[0].length||1))==n.length)break}(a=i&&i[0].length||0)||(0==l&&0==n.length?i=void 0:l!=s.getLine(t.line).length&&a++)}else{c.lastIndex=t.ch;var i,l,n=s.getLine(t.line),a=(i=c.exec(n))&&i[0].length||0;(l=i&&i.index)+a!=n.length&&(a=a||1)}if(i&&a)return{from:d(t.line,l),to:d(t.line,l+a),match:i}}):(i=c,t&&(c=c.toLowerCase()),a=t?function(e){return e.toLowerCase()}:function(e){return e},1==(f=c.split("\n")).length?c.length?this.matches=function(e,t){if(e){var n=s.getLine(t.line).slice(0,t.ch);if(-1<(r=(o=a(n)).lastIndexOf(c)))return r=l(n,o,r),{from:d(t.line,r),to:d(t.line,r+i.length)}}else{var o,r,n=s.getLine(t.line).slice(t.ch);if(-1<(r=(o=a(n)).indexOf(c)))return r=l(n,o,r)+t.ch,{from:d(t.line,r),to:d(t.line,r+i.length)}}}:this.matches=function(){}:(u=i.split("\n"),this.matches=function(e,t){var n=f.length-1;if(e){if(!(t.line-(f.length-1)<s.firstLine())&&a(s.getLine(t.line).slice(0,u[n].length))==f[f.length-1]){for(var e=d(t.line,u[n].length),o=t.line-1,r=n-1;1<=r;--r,--o)if(f[r]!=a(s.getLine(o)))return;var i=(l=s.getLine(o)).length-u[0].length;if(a(l.slice(i))==f[0])return{from:d(o,i),to:e}}}else if(!(t.line+(f.length-1)>s.lastLine())){var l,i=(l=s.getLine(t.line)).length-u[0].length;if(a(l.slice(i))==f[0]){for(e=d(t.line,i),o=t.line+1,r=1;r<n;++r,++o)if(f[r]!=a(s.getLine(o)))return;if(a(s.getLine(o).slice(0,u[n].length))==f[n])return{from:e,to:d(o,u[n].length)}}}}))}function l(e,t,n){if(e.length==t.length)return n;for(var o=Math.min(n,e.length);;){var r=e.slice(0,o).toLowerCase().length;if(r<n)++o;else{if(!(n<r))return o;--o}}}o.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){var t=this,n=this.doc.clipPos(e?this.pos.from:this.pos.to);function o(e){e=d(e,0);return t.pos={from:e,to:e},t.atOccurrence=!1}for(;;){if(this.pos=this.matches(e,n))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!n.line)return o(0);n=d(n.line-1,this.doc.getLine(n.line-1).length)}else{var r=this.doc.lineCount();if(n.line==r-1)return o(r);n=d(n.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(e){this.atOccurrence&&(e=r.splitLines(e),this.doc.replaceRange(e,this.pos.from,this.pos.to),this.pos.to=d(this.pos.from.line+e.length-1,e[e.length-1].length+(1==e.length?this.pos.from.ch:0)))}},r.defineExtension("getSearchCursor",function(e,t,n){return new o(this.doc,e,t,n)}),r.defineDocExtension("getSearchCursor",function(e,t,n){return new o(this,e,t,n)}),r.defineExtension("selectMatches",function(e,t){for(var n=[],o=this.getSearchCursor(e,this.getCursor("from"),t);o.findNext()&&!(0<r.cmpPos(o.to(),this.getCursor("to")));)n.push({anchor:o.from(),head:o.to()});n.length&&this.setSelections(n,0)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],e):e(CodeMirror)}(function(r){"use strict";function t(){this.posFrom=this.posTo=this.query=null,this.overlay=null}function l(e){return e.state.search||(e.state.search=new t)}function a(e){return"string"==typeof e&&e==e.toLowerCase()}function f(e,t,n){return e.getSearchCursor(t,n,a(t))}function n(e,t,n,o,r){e.openDialog?e.openDialog(t,r,{value:o}):r(prompt(n,o))}function u(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);if(t)try{e=new RegExp(t[1],-1==t[2].indexOf("i")?"":"i")}catch(e){}return e=("string"==typeof e?""==e:e.test(""))?/x^/:e}function o(o,r){var i=l(o);if(i.query)return s(o,r);n(o,'Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',"Search for:",o.getSelection(),function(t){o.operation(function(){var n,e;t&&!i.query&&(i.query=u(t),o.removeOverlay(i.overlay,a(i.query)),i.overlay=(n=i.query,e=a(i.query),"string"==typeof n?n=new RegExp(n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),e?"gi":"g"):n.global||(n=new RegExp(n.source,n.ignoreCase?"gi":"g")),{token:function(e){n.lastIndex=e.pos;var t=n.exec(e.string);if(t&&t.index==e.pos)return e.pos+=t[0].length,"searching";t?e.pos=t.index:e.skipToEnd()}}),o.addOverlay(i.overlay),o.showMatchesOnScrollbar&&(i.annotate&&(i.annotate.clear(),i.annotate=null),i.annotate=o.showMatchesOnScrollbar(i.query,a(i.query))),i.posFrom=i.posTo=o.getCursor(),s(o,r))})})}function s(n,o){n.operation(function(){var e=l(n),t=f(n,e.query,o?e.posFrom:e.posTo);(t.find(o)||(t=f(n,e.query,o?r.Pos(n.lastLine()):r.Pos(n.firstLine(),0))).find(o))&&(n.setSelection(t.from(),t.to()),n.scrollIntoView({from:t.from(),to:t.to()}),e.posFrom=t.from(),e.posTo=t.to())})}function d(t){t.operation(function(){var e=l(t);e.query&&(e.query=null,t.removeOverlay(e.overlay),e.annotate)&&(e.annotate.clear(),e.annotate=null)})}function i(c,e){c.getOption("readOnly")||n(c,'Replace: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',"Replace:",c.getSelection(),function(s){s&&(s=u(s),n(c,'With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',"Replace with:","",function(t){var i,l,a;e?c.operation(function(){for(var n,e=f(c,s);e.findNext();)"string"!=typeof s?(n=c.getRange(e.from(),e.to()).match(s),e.replace(t.replace(/\$(\d)/g,function(e,t){return n[t]}))):e.replace(t)}):(d(c),i=f(c,s,c.getCursor()),a=function(n){i.replace("string"==typeof s?t:t.replace(/\$(\d)/g,function(e,t){return n[t]})),l()},(l=function(){var e,t,n,o,r=i.from();!(e=i.findNext())&&(i=f(c,s),!(e=i.findNext())||r&&i.from().line==r.line&&i.from().ch==r.ch)||(c.setSelection(i.from(),i.to()),c.scrollIntoView({from:i.from(),to:i.to()}),r="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>",n="Replace?",o=[function(){a(e)},l],(t=c).openConfirm?t.openConfirm(r,o):confirm(n)&&o[0]())})())}))})}r.commands.find=function(e){d(e),o(e)},r.commands.findNext=o,r.commands.findPrev=function(e){o(e,!0)},r.commands.clearSearch=d,r.commands.replace=i,r.commands.replaceAll=function(e){i(e,!0)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){function n(e){clearTimeout(o.doRedraw),o.doRedraw=setTimeout(function(){o.redraw()},e)}this.cm=e,this.options=t,this.buttonHeight=t.scrollButtonHeight||e.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=e.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();var o=this;e.on("refresh",this.resizeHandler=function(){clearTimeout(o.doUpdate),o.doUpdate=setTimeout(function(){o.computeScale()&&n(20)},100)}),e.on("markerAdded",this.resizeHandler),e.on("markerCleared",this.resizeHandler),!1!==t.listenForChanges&&e.on("change",this.changeHandler=function(){n(250)})}e.defineExtension("annotateScrollbar",function(e){return new t(this,e="string"==typeof e?{className:e}:e)}),e.defineOption("scrollButtonHeight",0),t.prototype.computeScale=function(){var e=this.cm,e=(e.getWrapperElement().clientHeight-e.display.barHeight-2*this.buttonHeight)/e.heightAtLine(e.lastLine()+1,"local");if(e!=this.hScale)return this.hScale=e,!0},t.prototype.update=function(e){this.annotations=e,this.redraw()},t.prototype.redraw=function(e){!1!==e&&this.computeScale();var t=this.cm,n=this.hScale,o=document.createDocumentFragment(),r=this.annotations;if(t.display.barWidth)for(var i,l=0;l<r.length;l++){for(var a,s,c=r[l],f=i||t.charCoords(c.from,"local").top*n,u=t.charCoords(c.to,"local").bottom*n;l<r.length-1&&!(u+.9<(i=t.charCoords(r[l+1].from,"local").top*n));)c=r[++l],u=t.charCoords(c.to,"local").bottom*n;u!=f&&(a=Math.max(u-f,3),(s=o.appendChild(document.createElement("div"))).style.cssText="position: absolute; right: 0px; width: "+Math.max(t.display.barWidth-1,2)+"px; top: "+(f+this.buttonHeight)+"px; height: "+a+"px",s.className=this.options.className)}this.div.textContent="",this.div.appendChild(o)},t.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("change",this.changeHandler),this.div.parentNode.removeChild(this.div)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../scroll/annotatescrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../scroll/annotatescrollbar"],e):e(CodeMirror)}(function(s){"use strict";function o(e,t,n,o){this.cm=e;var r,i={listenForChanges:!1};for(r in o)i[r]=o[r];i.className||(i.className="CodeMirror-search-match"),this.annotation=e.annotateScrollbar(i),this.query=t,this.caseFold=n,this.gap={from:e.firstLine(),to:e.lastLine()+1},this.matches=[],this.update=null,this.findMatches(),this.annotation.update(this.matches);var l=this;e.on("change",this.changeHandler=function(e,t){l.onChange(t)})}s.defineExtension("showMatchesOnScrollbar",function(e,t,n){return new o(this,e,t,n=(n="string"==typeof n?{className:n}:n)||{})});function c(e,t,n){return e<=t?e:Math.max(t,e+n)}o.prototype.findMatches=function(){if(this.gap){for(var e=0;e<this.matches.length;e++){if((t=this.matches[e]).from.line>=this.gap.to)break;t.to.line>=this.gap.from&&this.matches.splice(e--,1)}for(var t,n=this.cm.getSearchCursor(this.query,s.Pos(this.gap.from,0),this.caseFold);n.findNext();){if((t={from:n.from(),to:n.to()}).from.line>=this.gap.to)break;if(this.matches.splice(e++,0,t),1e3<this.matches.length)break}this.gap=null}},o.prototype.onChange=function(e){var t=e.from.line,n=s.changeEnd(e).line,o=n-e.to.line;if(this.gap?(this.gap.from=Math.min(c(this.gap.from,t,o),e.from.line),this.gap.to=Math.max(c(this.gap.to,t,o),e.from.line)):this.gap={from:e.from.line,to:n+1},o)for(var r=0;r<this.matches.length;r++){var i=this.matches[r],l=c(i.from.line,t,o),l=(l!=i.from.line&&(i.from=s.Pos(l,i.from.ch)),c(i.to.line,t,o));l!=i.to.line&&(i.to=s.Pos(l,i.to.ch))}clearTimeout(this.update);var a=this;this.update=setTimeout(function(){a.updateAfterChange()},250)},o.prototype.updateAfterChange=function(){this.findMatches(),this.annotation.update(this.matches)},o.prototype.clear=function(){this.cm.off("change",this.changeHandler),this.annotation.clear()}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(o){function r(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function i(e){r(e);var t=e.state.placeholder=document.createElement("pre");t.style.cssText="height: 0; overflow: visible",t.className="CodeMirror-placeholder",t.appendChild(document.createTextNode(e.getOption("placeholder"))),e.display.lineSpace.insertBefore(t,e.display.lineSpace.firstChild)}function l(e){s(e)&&i(e)}function a(e){var t=e.getWrapperElement(),n=s(e);t.className=t.className.replace(" CodeMirror-empty","")+(n?" CodeMirror-empty":""),(n?i:r)(e)}function s(e){return 1===e.lineCount()&&""===e.getLine(0)}o.defineOption("placeholder","",function(e,t,n){var n=n&&n!=o.Init;t&&!n?(e.on("blur",l),e.on("change",a),a(e)):!t&&n&&(e.off("blur",l),e.off("change",a),r(e),(n=e.getWrapperElement()).className=n.className.replace(" CodeMirror-empty","")),t&&!e.hasFocus()&&l(e)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],e):e(CodeMirror)}(function(p){p.defineOption("autoCloseTags",!1,function(e,t,n){n!=p.Init&&n&&e.removeKeyMap("autoCloseTags"),t&&(n={name:"autoCloseTags"},"object"==typeof t&&!t.whenClosing||(n["'/'"]=function(e){return(e=e).getOption("disableInput")?p.Pass:o(e,!0)}),"object"==typeof t&&!t.whenOpening||(n["'>'"]=function(e){var t=e;if(t.getOption("disableInput"))return p.Pass;for(var n=t.listSelections(),o=[],r=0;r<n.length;r++){if(!n[r].empty())return p.Pass;var i=n[r].head,l=t.getTokenAt(i),a=p.innerMode(t.getMode(),l.state),s=a.state;if("xml"!=a.mode.name||!s.tagName)return p.Pass;var c=t.getOption("autoCloseTags"),a="html"==a.mode.configuration,f="object"==typeof c&&c.dontCloseTags||a&&m,c="object"==typeof c&&c.indentTags||a&&g,a=s.tagName,u=(a=l.end>i.ch?a.slice(0,a.length-l.end+i.ch):a).toLowerCase();if(!a||"string"==l.type&&(l.end!=i.ch||!/[\"\']/.test(l.string.charAt(l.string.length-1))||1==l.string.length)||"tag"==l.type&&"closeTag"==s.type||l.string.indexOf("/")==l.string.length-1||f&&-1<v(f,u)||y(t,a,i,s,!0))return p.Pass;l=c&&-1<v(c,u);o[r]={indent:l,text:">"+(l?"\n\n":"")+"</"+a+">",newPos:l?p.Pos(i.line+1,0):p.Pos(i.line,i.ch+1)}}for(r=n.length-1;0<=r;r--){var d=o[r],h=(t.replaceRange(d.text,n[r].head,n[r].anchor,"+insert"),t.listSelections().slice(0));h[r]={head:d.newPos,anchor:d.newPos},t.setSelections(h),d.indent&&(t.indentLine(d.newPos.line,null,!0),t.indentLine(d.newPos.line+1,null,!0))}}),e.addKeyMap(n))});var m=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],g=["applet","blockquote","body","button","div","dl","fieldset","form","frameset","h1","h2","h3","h4","h5","h6","head","html","iframe","layer","legend","object","ol","p","select","table","ul"];function o(e,t){for(var n=e.listSelections(),o=[],r=t?"/":"</",i=0;i<n.length;i++){if(!n[i].empty())return p.Pass;var l=n[i].head,a=e.getTokenAt(l),s=p.innerMode(e.getMode(),a.state),c=s.state;if(t&&("string"==a.type||"<"!=a.string.charAt(0)||a.start!=l.ch-1))return p.Pass;if("xml"!=s.mode.name)if("htmlmixed"==e.getMode().name&&"javascript"==s.mode.name)o[i]=r+"script>";else{if("htmlmixed"!=e.getMode().name||"css"!=s.mode.name)return p.Pass;o[i]=r+"style>"}else{if(!c.context||!c.context.tagName||y(e,c.context.tagName,l,c))return p.Pass;o[i]=r+c.context.tagName+">"}}e.replaceSelections(o);for(n=e.listSelections(),i=0;i<n.length;i++)(i==n.length-1||n[i].head.line<n[i+1].head.line)&&e.indentLine(n[i].head.line)}function v(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,o=e.length;n<o;++n)if(e[n]==t)return n;return-1}function y(e,t,n,o,r){if(p.scanForClosingTag){var i=Math.min(e.lastLine()+1,n.line+500),l=p.scanForClosingTag(e,n,null,i);if(l&&l.tag==t){for(var a=o.context,s=r?1:0;a&&a.tagName==t;a=a.prev)++s;n=l.to;for(var c=1;c<s;c++){var f=p.scanForClosingTag(e,n,null,i);if(!f||f.tag!=t)return;n=f.to}return 1}}}p.commands.closeTag=function(e){return o(e)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(c){"use strict";function r(r,i,e,l){e&&e.call?(a=e,e=null):a=f(r,e,"rangeFinder"),"number"==typeof i&&(i=c.Pos(i,0));var a,s=f(r,e,"minFoldSize");function t(e){var t=a(r,i);if(!t||t.to.line-t.from.line<s)return null;for(var n=r.findMarksAt(t.from),o=0;o<n.length;++o)if(n[o].__isFold&&"fold"!==l){if(!e)return null;t.cleared=!0,n[o].clear()}return t}var n,o=t(!0);if(f(r,e,"scanUp"))for(;!o&&i.line>r.firstLine();)i=c.Pos(i.line-1,0),o=t(!1);o&&!o.cleared&&"unfold"!==l&&(e=function(e,t){e=f(e,t,"widget");"string"==typeof e&&(t=document.createTextNode(e),(e=document.createElement("span")).appendChild(t),e.className="CodeMirror-foldmarker");return e}(r,e),c.on(e,"mousedown",function(e){n.clear(),c.e_preventDefault(e)}),(n=r.markText(o.from,o.to,{replacedWith:e,clearOnEnter:!0,__isFold:!0})).on("clear",function(e,t){c.signal(r,"unfold",r,e,t)}),c.signal(r,"fold",r,o.from,o.to))}c.newFoldFunction=function(n,o){return function(e,t){r(e,t,{rangeFinder:n,widget:o})}},c.defineExtension("foldCode",function(e,t,n){r(this,e,t,n)}),c.defineExtension("isFolded",function(e){for(var t=this.findMarksAt(e),n=0;n<t.length;++n)if(t[n].__isFold)return!0}),c.commands.toggleFold=function(e){e.foldCode(e.getCursor())},c.commands.fold=function(e){e.foldCode(e.getCursor(),null,"fold")},c.commands.unfold=function(e){e.foldCode(e.getCursor(),null,"unfold")},c.commands.foldAll=function(n){n.operation(function(){for(var e=n.firstLine(),t=n.lastLine();e<=t;e++)n.foldCode(c.Pos(e,0),null,"fold")})},c.commands.unfoldAll=function(n){n.operation(function(){for(var e=n.firstLine(),t=n.lastLine();e<=t;e++)n.foldCode(c.Pos(e,0),null,"unfold")})},c.registerHelper("fold","combine",function(){var r=Array.prototype.slice.call(arguments,0);return function(e,t){for(var n=0;n<r.length;++n){var o=r[n](e,t);if(o)return o}}}),c.registerHelper("fold","auto",function(e,t){for(var n=e.getHelpers(t,"fold"),o=0;o<n.length;o++){var r=n[o](e,t);if(r)return r}});var o={rangeFinder:c.fold.auto,widget:"↔",minFoldSize:0,scanUp:!1};function f(e,t,n){return(t&&void 0!==t[n]||(t=e.options.foldOptions)&&void 0!==t[n]?t:o)[n]}c.defineOption("foldOptions",null),c.defineExtension("foldOption",function(e,t){return f(this,e,t)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],e):e(CodeMirror)}(function(o){"use strict";o.defineOption("foldGutter",!1,function(e,t,n){n&&n!=o.Init&&(e.clearGutter(e.state.foldGutter.options.gutter),e.state.foldGutter=null,e.off("gutterClick",a),e.off("change",f),e.off("viewportChange",u),e.off("fold",d),e.off("unfold",d),e.off("swapDoc",l)),t&&(e.state.foldGutter=new r(function(e){!0===e&&(e={});null==e.gutter&&(e.gutter="CodeMirror-foldgutter");null==e.indicatorOpen&&(e.indicatorOpen="CodeMirror-foldgutter-open");null==e.indicatorFolded&&(e.indicatorFolded="CodeMirror-foldgutter-folded");return e}(t)),l(e),e.on("gutterClick",a),e.on("change",f),e.on("viewportChange",u),e.on("fold",d),e.on("unfold",d),e.on("swapDoc",l))});var s=o.Pos;function r(e){this.options=e,this.from=this.to=0}function c(e){var t;return"string"==typeof e?((t=document.createElement("div")).className=e+" CodeMirror-guttermarker-subtle",t):e.cloneNode(!0)}function i(o,e,t){var r=o.state.foldGutter.options,i=e,l=o.foldOption(r,"minFoldSize"),a=o.foldOption(r,"rangeFinder");o.eachLine(e,t,function(e){var t,n=null;!function(e,t){for(var n=e.findMarksAt(s(t)),o=0;o<n.length;++o)if(n[o].__isFold&&n[o].find().from.line==t)return 1}(o,i)?(t=s(i,0),(t=a&&a(o,t))&&t.to.line-t.from.line>=l&&(n=c(r.indicatorOpen))):n=c(r.indicatorFolded),o.setGutterMarker(e,r.gutter,n),++i})}function l(e){var t=e.getViewport(),n=e.state.foldGutter;n&&(e.operation(function(){i(e,t.from,t.to)}),n.from=t.from,n.to=t.to)}function a(e,t,n){var o=e.state.foldGutter;o&&n==(n=o.options).gutter&&e.foldCode(s(t,0),n.rangeFinder)}function f(e){var t,n=e.state.foldGutter;n&&(t=n.options,n.from=n.to=0,clearTimeout(n.changeUpdate),n.changeUpdate=setTimeout(function(){l(e)},t.foldOnChangeTimeSpan||600))}function u(t){var e,n=t.state.foldGutter;n&&(e=n.options,clearTimeout(n.changeUpdate),n.changeUpdate=setTimeout(function(){var e=t.getViewport();n.from==n.to||20<e.from-n.to||20<n.from-e.to?l(t):t.operation(function(){e.from<n.from&&(i(t,e.from,n.from),n.from=e.from),e.to>n.to&&(i(t,n.to,e.to),n.to=e.to)})},e.updateViewportTimeSpan||400))}function d(e,t){var n=e.state.foldGutter;n&&(t=t.line)>=n.from&&t<n.to&&i(e,t,t+1)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(f){"use strict";f.registerHelper("fold","indent",function(e,t){var n=e.getOption("tabSize"),o=e.getLine(t.line);if(/\S/.test(o)){for(var r=function(e){return f.countColumn(e,null,n)},i=r(o),l=null,a=t.line+1,s=e.lastLine();a<=s;++a){var c=e.getLine(a);if(i<r(c))l=a;else if(/\S/.test(c))break}return l?{from:f.Pos(t.line,o.length),to:f.Pos(l,e.getLine(l).length)}:void 0}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(y){"use strict";y.registerHelper("fold","brace",function(r,i){var l,a=i.line,s=r.getLine(a);function e(e){for(var t=i.ch,n=0;;){var o=t<=0?-1:s.lastIndexOf(e,t-1);if(-1==o){if(1==n)break;n=1,t=s.length}else{if(1==n&&o<i.ch)break;if(l=r.getTokenTypeAt(y.Pos(a,o+1)),!/^(comment|string)/.test(l))return o+1;t=o-1}}}var t="{",n="}",o=e("{");if(null==o&&(n="]",o=e(t="[")),null!=o){var c,f,u=1,d=r.lastLine();e:for(var h=a;h<=d;++h)for(var p=r.getLine(h),m=h==a?o:0;;){var g=p.indexOf(t,m),v=p.indexOf(n,m);if(g<0&&(g=p.length),v<0&&(v=p.length),(m=Math.min(g,v))==p.length)break;if(r.getTokenTypeAt(y.Pos(h,m+1))==l)if(m==g)++u;else if(!--u){c=h,f=m;break e}++m}if(null!=c&&(a!=c||f!=o))return{from:y.Pos(a,o),to:y.Pos(c,f)}}}),y.registerHelper("fold","import",function(i,e){function t(e){if(e<i.firstLine()||e>i.lastLine())return null;var t=i.getTokenAt(y.Pos(e,1));if("keyword"!=(t=/\S/.test(t.string)?t:i.getTokenAt(y.Pos(e,t.end+1))).type||"import"!=t.string)return null;for(var n=e,o=Math.min(i.lastLine(),e+10);n<=o;++n){var r=i.getLine(n).indexOf(";");if(-1!=r)return{startCh:t.end,end:y.Pos(n,r)}}}var n,o=t(e=e.line);if(!o||t(e-1)||(n=t(e-2))&&n.end.line==e-1)return null;for(var r=o.end;;){var l=t(r.line+1);if(null==l)break;r=l.end}return{from:i.clipPos(y.Pos(e,o.startCh+1)),to:r}}),y.registerHelper("fold","include",function(n,e){function t(e){var t;return e<n.firstLine()||e>n.lastLine()?null:(t=n.getTokenAt(y.Pos(e,1)),"meta"==(t=/\S/.test(t.string)?t:n.getTokenAt(y.Pos(e,t.end+1))).type&&"#include"==t.string.slice(0,8)?t.start+8:void 0)}var o=t(e=e.line);if(null==o||null!=t(e-1))return null;for(var r=e;;){if(null==t(r+1))break;++r}return{from:y.Pos(e,o+1),to:n.clipPos(y.Pos(r))}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var s=e.Pos;var t="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",o=new RegExp("<(/?)(["+t+"][A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");function c(e,t,n,o){this.line=t,this.ch=n,this.cm=e,this.text=e.getLine(t),this.min=o?o.from:e.firstLine(),this.max=o?o.to-1:e.lastLine()}function a(e,t){e=e.cm.getTokenTypeAt(s(e.line,t));return e&&/\btag\b/.test(e)}function r(e){return!(e.line>=e.max)&&(e.ch=0,e.text=e.cm.getLine(++e.line),1)}function f(e){return!(e.line<=e.min)&&(e.text=e.cm.getLine(--e.line),e.ch=e.text.length,1)}function u(e){for(;;){var t,n=e.text.indexOf(">",e.ch);if(-1==n){if(r(e))continue;return}if(a(e,n+1))return t=-1<(t=e.text.lastIndexOf("/",n))&&!/\S/.test(e.text.slice(t+1,n)),e.ch=n+1,t?"selfClose":"regular";e.ch=n+1}}function d(e){for(;;){var t=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==t){if(f(e))continue;return}if(a(e,t+1)){o.lastIndex=t,e.ch=t;var n=o.exec(e.text);if(n&&n.index==t)return n}else e.ch=t}}function h(e){for(;;){o.lastIndex=e.ch;var t=o.exec(e.text);if(!t){if(r(e))continue;return}if(a(e,t.index+1))return e.ch=t.index+t[0].length,t;e.ch=t.index+1}}function p(e,t){for(var n=[];;){var o,r=h(e),i=e.line,l=e.ch-(r?r[0].length:0);if(!r||!(o=u(e)))return;if("selfClose"!=o)if(r[1]){for(var a=n.length-1;0<=a;--a)if(n[a]==r[2]){n.length=a;break}if(a<0&&(!t||t==r[2]))return{tag:r[2],from:s(i,l),to:s(e.line,e.ch)}}else n.push(r[2])}}function m(e,t){for(var n=[];;){var o=function(e){for(;;){var t,n=e.ch?e.text.lastIndexOf(">",e.ch-1):-1;if(-1==n){if(f(e))continue;return}if(a(e,n+1))return t=-1<(t=e.text.lastIndexOf("/",n))&&!/\S/.test(e.text.slice(t+1,n)),e.ch=n+1,t?"selfClose":"regular";e.ch=n}}(e);if(!o)return;if("selfClose"==o)d(e);else{var o=e.line,r=e.ch,i=d(e);if(!i)return;if(i[1])n.push(i[2]);else{for(var l=n.length-1;0<=l;--l)if(n[l]==i[2]){n.length=l;break}if(l<0&&(!t||t==i[2]))return{tag:i[2],from:s(e.line,e.ch),to:s(o,r)}}}}}e.registerHelper("fold","xml",function(e,t){for(var n=new c(e,t.line,0);;){var o,r=h(n);if(!r||n.line!=t.line||!(o=u(n)))return;if(!r[1]&&"selfClose"!=o)return t=s(n.line,n.ch),(r=p(n,r[2]))&&{from:t,to:r.from}}}),e.findMatchingTag=function(e,t,n){var o=new c(e,t.line,t.ch,n);if(-1!=o.text.indexOf(">")||-1!=o.text.indexOf("<")){var r,i=u(o),l=i&&s(o.line,o.ch),a=i&&d(o);if(i&&a&&(t=t,!(0<((r=o).line-t.line||r.ch-t.ch))))return r={from:s(o.line,o.ch),to:l,tag:a[2]},"selfClose"==i?{open:r,close:null,at:"open"}:a[1]?{open:m(o,a[2]),close:r,at:"close"}:{open:r,close:p(o=new c(e,l.line,l.ch,n),a[2]),at:"open"}}},e.findEnclosingTag=function(e,t,n){for(var o=new c(e,t.line,t.ch,n);;){var r=m(o);if(!r)break;var i=p(new c(e,t.line,t.ch,n),r.tag);if(i)return{open:r,close:i}}},e.scanForClosingTag=function(e,t,n,o){return p(new c(e,t.line,t.ch,o?{from:0,to:o}:null),n)}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(f){"use strict";f.registerHelper("fold","markdown",function(t,e){function o(e){e=t.getTokenTypeAt(f.Pos(e,0));return e&&/\bheader\b/.test(e)}function n(e,t,n){t=t&&t.match(/^#+/);return t&&o(e)?t[0].length:n&&n.match(/^[=\-]+\s*$/)&&o(e+1)?"="==n[0]?1:2:100}var r=t.getLine(e.line),i=t.getLine(e.line+1),l=n(e.line,r,i);if(100!==l){for(var a=t.lastLine(),s=e.line,c=t.getLine(s+2);s<a&&!(n(s+1,i,c)<=l);)i=c,c=t.getLine(++s+2);return{from:f.Pos(e.line,r.length),to:f.Pos(s,t.getLine(s).length)}}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(C){"use strict";C.registerGlobalHelper("fold","comment",function(e){return e.blockCommentStart&&e.blockCommentEnd},function(e,t){var n=e.getModeAt(t),o=n.blockCommentStart,r=n.blockCommentEnd;if(o&&r){for(var i,l=t.line,a=e.getLine(l),s=t.ch,c=0;;){var f=s<=0?-1:a.lastIndexOf(o,s-1);if(-1==f){if(1==c)return;c=1,s=a.length}else{if(1==c&&f<t.ch)return;if(/comment/.test(e.getTokenTypeAt(C.Pos(l,f+1)))){i=f+o.length;break}s=f-1}}var u,d,h=1,p=e.lastLine();e:for(var m=l;m<=p;++m)for(var g=e.getLine(m),v=m==l?i:0;;){var y=g.indexOf(o,v),b=g.indexOf(r,v);if(y<0&&(y=g.length),b<0&&(b=g.length),(v=Math.min(y,b))==g.length)break;if(v==y)++h;else if(!--h){u=m,d=v;break e}++v}if(null!=u&&(l!=u||d!=i))return{from:C.Pos(l,i),to:C.Pos(u,d)}}})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(t){"use strict";t.overlayMode=function(n,o,r){return{startState:function(){return{base:t.startState(n),overlay:t.startState(o),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(e){return{base:t.copyState(n,e.base),overlay:t.copyState(o,e.overlay),basePos:e.basePos,baseCur:null,overlayPos:e.overlayPos,overlayCur:null}},token:function(e,t){return(e!=t.streamSeen||Math.min(t.basePos,t.overlayPos)<e.start)&&(t.streamSeen=e,t.basePos=t.overlayPos=e.start),e.start==t.basePos&&(t.baseCur=n.token(e,t.base),t.basePos=e.pos),e.start==t.overlayPos&&(e.pos=e.start,t.overlayCur=o.token(e,t.overlay),t.overlayPos=e.pos),e.pos=Math.min(t.basePos,t.overlayPos),null==t.overlayCur?t.baseCur:null!=t.baseCur&&t.overlay.combineTokens||r&&null==t.overlay.combineTokens?t.baseCur+" "+t.overlayCur:t.overlayCur},indent:n.indent&&function(e,t){return n.indent(e.base,t)},electricChars:n.electricChars,innerMode:function(e){return{state:e.base,mode:n}},blankLine:function(e){n.blankLine&&n.blankLine(e.base),o.blankLine&&o.blankLine(e.overlay)}}}}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(o){"use strict";var i="CodeMirror-activeline",l="CodeMirror-activeline-background";function a(e){for(var t=0;t<e.state.activeLines.length;t++)e.removeLineClass(e.state.activeLines[t],"wrap",i),e.removeLineClass(e.state.activeLines[t],"background",l)}function r(t,e){for(var n=[],o=0;o<e.length;o++){var r=e[o];r.empty()&&(r=t.getLineHandleVisualStart(r.head.line),n[n.length-1]!=r)&&n.push(r)}!function(e,t){if(e.length==t.length){for(var n=0;n<e.length;n++)if(e[n]!=t[n])return;return 1}}(t.state.activeLines,n)&&t.operation(function(){a(t);for(var e=0;e<n.length;e++)t.addLineClass(n[e],"wrap",i),t.addLineClass(n[e],"background",l);t.state.activeLines=n})}function s(e,t){r(e,t.ranges)}o.defineOption("styleActiveLine",!1,function(e,t,n){n=n&&n!=o.Init;t&&!n?(e.state.activeLines=[],r(e,e.listSelections()),e.on("beforeSelectionChange",s)):!t&&n&&(e.off("beforeSelectionChange",s),a(e),delete e.state.activeLines)})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(d){var h=/\s/,p=d.Pos;function l(e,t){e=e.getRange(p(t.line,t.ch-1),p(t.line,t.ch+1));return 2==e.length?e:null}d.defineOption("autoCloseBrackets",!1,function(e,t,n){var o,r,i;n!=d.Init&&n&&e.removeKeyMap("autoCloseBrackets"),t&&(n="()[]{}''\"\"",o="'\"",r="[]{}","string"==typeof t?n=t:"object"==typeof t&&(null!=t.pairs&&(n=t.pairs),null!=t.triples&&(o=t.triples),null!=t.explode)&&(r=t.explode),t=function(i,f){for(var e={name:"autoCloseBrackets",Backspace:function(e){if(e.getOption("disableInput"))return d.Pass;for(var t=e.listSelections(),n=0;n<t.length;n++){if(!t[n].empty())return d.Pass;var o=l(e,t[n].head);if(!o||i.indexOf(o)%2!=0)return d.Pass}for(n=t.length-1;0<=n;n--){var r=t[n].head;e.replaceRange("",p(r.line,r.ch-1),p(r.line,r.ch+1))}}},u="",t=0;t<i.length;t+=2)!function(s,c){u+=c,e["'"+s+"'"]=function(n){if(n.getOption("disableInput"))return d.Pass;for(var o,e=n.listSelections(),t=0;t<e.length;t++){var r,i=e[t],l=i.head,a=n.getRange(l,p(l.line,l.ch+1));if(i.empty())if(s==c&&a==c)r=n.getRange(l,p(l.line,l.ch+3))==s+s+s?"skipThree":"skip";else if(s==c&&1<l.ch&&0<=f.indexOf(s)&&n.getRange(p(l.line,l.ch-2),l)==s+s&&(l.ch<=2||n.getRange(p(l.line,l.ch-3),p(l.line,l.ch-2))!=s))r="addFour";else{if('"'==s||"'"==s){if(d.isWordChar(a)||!function(e,t,n){var o=e.getLine(t.line),r=e.getTokenAt(t);if(/\bstring2?\b/.test(r.type))return;var i=new d.StringStream(o.slice(0,t.ch)+n+o.slice(t.ch),4);for(i.pos=i.start=r.start;;){var l=e.getMode().token(i,r.state);if(i.pos>=t.ch+1)return/\bstring2?\b/.test(l);i.start=i.pos}}(n,l,s))return d.Pass}else if(!(n.getLine(l.line).length==l.ch||0<=u.indexOf(a)||h.test(a)))return d.Pass;r="both"}else r="surround";if(o){if(o!=r)return d.Pass}else o=r}n.operation(function(){if("skip"==o)n.execCommand("goCharRight");else if("skipThree"==o)for(var e=0;e<3;e++)n.execCommand("goCharRight");else if("surround"==o){for(var t=n.getSelections(),e=0;e<t.length;e++)t[e]=s+t[e]+c;n.replaceSelections(t,"around")}else"both"==o?(n.replaceSelection(s+c,null),n.execCommand("goCharLeft")):"addFour"==o&&(n.replaceSelection(s+s+s+s,"before"),n.execCommand("goCharRight"))})},s!=c&&(e["'"+c+"'"]=function(e){for(var t=e.listSelections(),n=0;n<t.length;n++){var o=t[n];if(!o.empty()||e.getRange(o.head,p(o.head.line,o.head.ch+1))!=c)return d.Pass}e.execCommand("goCharRight")})}(i.charAt(t),i.charAt(t+1));return e}(n,o),r&&(t.Enter=(i=r,function(n){if(n.getOption("disableInput"))return d.Pass;for(var o=n.listSelections(),e=0;e<o.length;e++){if(!o[e].empty())return d.Pass;var t=l(n,o[e].head);if(!t||i.indexOf(t)%2!=0)return d.Pass}n.operation(function(){n.replaceSelection("\n\n",null),n.execCommand("goCharLeft"),o=n.listSelections();for(var e=0;e<o.length;e++){var t=o[e].head.line;n.indentLine(t,null,!0),n.indentLine(t+1,null,!0)}})})),e.addKeyMap(t))})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(o){"use strict";o.defineOption("fullScreen",!1,function(e,t,n){!(n=n==o.Init?!1:n)!=!t&&(t?(t=(n=e).getWrapperElement(),n.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:t.style.width,height:t.style.height},t.style.width="",t.style.height="auto",t.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",n):((n=(t=e).getWrapperElement()).className=n.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="",e=t.state.fullScreenRestore,n.style.width=e.width,n.style.height=e.height,window.scrollTo(e.scrollLeft,e.scrollTop),t)).refresh()})}),function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(o){"use strict";function r(e){"object"==typeof e&&(this.minChars=e.minChars,this.style=e.style,this.showToken=e.showToken,this.delay=e.delay,this.wordsOnly=e.wordsOnly),null==this.style&&(this.style="matchhighlight"),null==this.minChars&&(this.minChars=2),null==this.delay&&(this.delay=100),null==this.wordsOnly&&(this.wordsOnly=!1),this.overlay=this.timeout=null}function i(e){var t=e.state.matchHighlighter;clearTimeout(t.timeout),t.timeout=setTimeout(function(){l(e)},t.delay)}function l(a){a.operation(function(){var e=a.state.matchHighlighter;if(e.overlay&&(a.removeOverlay(e.overlay),e.overlay=null),!a.somethingSelected()&&e.showToken){for(var t=!0===e.showToken?/[\w$]/:e.showToken,n=a.getCursor(),o=a.getLine(n.line),r=n.ch,i=r;r&&t.test(o.charAt(r-1));)--r;for(;i<o.length&&t.test(o.charAt(i));)++i;r<i&&a.addOverlay(e.overlay=s(o.slice(r,i),t,e.style))}else{var n=a.getCursor("from"),l=a.getCursor("to");n.line!=l.line||e.wordsOnly&&!function(e,t,n){if(null!==e.getRange(t,n).match(/^\w+$/)){if(0<t.ch){var o={line:t.line,ch:t.ch-1};if(null===e.getRange(o,t).match(/\W/))return}if(n.ch<e.getLine(t.line).length){o={line:n.line,ch:n.ch+1};if(null===e.getRange(n,o).match(/\W/))return}return 1}}(a,n,l)||(n=a.getRange(n,l).replace(/^\s+|\s+$/g,"")).length>=e.minChars&&a.addOverlay(e.overlay=s(n,!1,e.style))}})}function s(o,r,i){return{token:function(e){if(e.match(o)&&(!r||(n=r,!((t=e).start&&n.test(t.string.charAt(t.start-1))||t.pos!=t.string.length&&n.test(t.string.charAt(t.pos))))))return i;var t,n;e.next(),e.skipTo(o.charAt(0))||e.skipToEnd()}}}o.defineOption("highlightSelectionMatches",!1,function(e,t,n){n&&n!=o.Init&&((n=e.state.matchHighlighter.overlay)&&e.removeOverlay(n),clearTimeout(e.state.matchHighlighter.timeout),e.state.matchHighlighter=null,e.off("cursorActivity",i)),t&&(e.state.matchHighlighter=new r(t),l(e),e.on("cursorActivity",i))})});